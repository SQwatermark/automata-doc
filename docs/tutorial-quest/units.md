---
sidebar_position: 4
---

# 节点

任务的所有输入端口都只能有一个输入，输出端口可以有任意多个输出。

TODO 优先级高：暂且用文本框代替的选单在第一个测试版发布前必须做出来

## 开始

每个任务只有一个开始节点，由新建任务时自动创建，无法通过编辑器添加或删除开始节点。

## 结束

每个任务可以有多个结束节点，当任意一个结束节点的前置节点完成时，该任务会立即完成。

TODO 结束节点后边可以接行为节点

TODO 属性：自定义描述

自定义描述会显示在流程图的节点名右侧，用括号括起来

## 任务目标节点

TODO 共通属性：是否隐藏，如果为是，则开始和完成任务目标时玩家不会收到提示，玩家任务界面中也不会显示该任务目标。

共通属性：自定义描述

自定义描述会显示在流程图的节点名右侧，用括号括起来

### 对话（暂未完成）

对话ID（对话选单），先用文本框代替

对话NPC（NPC下拉选单），先用文本框代替

### 击杀（暂未完成）

要求玩家击杀一定数量的某种实体

类型（下拉选单）：[实体/NPC/玩家/脚本]

#### 实体

实体类型（多选下拉选单），先用文本框代替

可以选多种类型的实体，玩家击杀其中任意一种都算

#### NPC

NPCID（多选下拉选单），先用文本框代替

可以选多种NPC，玩家击杀其中任意一种都算

#### 玩家

无额外设置

#### 脚本

脚本函数（文本框）

要求给定一个函数名，此函数需存在于任务脚本中，输入类型为：

``` ts
interface Event {
  entity: Entity;
  player: ServerPlayer;
  boolean: predicate;
}
```

当玩家击杀任意实体时，会执行该脚本进行判断，其中的布尔值表示判断的返回值，默认为false，若返回true，表示玩家击杀的实体满足要求。

### 位置

要求玩家到达某个位置（每20tick检测一次）

属性：

世界（下拉选单），先用文本框代替

位置（暂未完成）：x1,y1,z1,x2,y2,z2，一个长方体范围

### 空目标

此任务目标必须通过脚本结束，脚本需监听任务目标开始事件，并在合适的时机调用结束该任务目标的方法。

## 流程控制节点

### 或（流程控制）

完成条件：完成任意一个前置节点

TODO 可以添加输入端口数量

### 且（流程控制）

完成条件：完成全部前置节点

TODO 可以添加输入端口数量

### 阻塞（暂未实现）

完成条件：满足第一个前置节点

## 逻辑判断节点（全部暂未实现）

设计和对话的逻辑判断节点一致

### 或（逻辑判断）

### 且（逻辑判断）

### 非

### 脚本（逻辑判断）

## 行为节点（全部暂未实现）

行为节点有一个输入端口，没有输出端口

### 物品

布尔值：取走/给予

正整数：数量

物品（物品怎么做输入？）