---
sidebar_position: 4
---

# 节点

任务的所有输入端口都只能有一个输入，输出端口可以有任意多个输出。

TODO 优先级高：暂且用文本框代替的选单在第一个测试版发布前必须做出来

## 任务目标节点

TODO 共通属性：是否隐藏，如果为是，则开始和完成任务目标时玩家不会收到提示，玩家任务界面中也不会显示该任务目标。

共通属性：自定义描述

自定义描述会显示在流程图的节点名右侧，用括号括起来

### 对话

和指定NPC进行某对话，不需要给NPC设置该对话，当玩家进行到对话节点时，右键NPC即可开启该对话。

通过指令开启对话同样可以完成该节点。

对话ID（对话选单），先用文本框代替

对话NPC（NPC下拉选单），先用文本框代替，可不填

### 击杀（暂未完成）

要求玩家击杀一定数量的某种实体

进度最大值为要击杀的实体的数量

类型（下拉选单）：[实体/NPC/玩家/脚本]

数量（正整数）

#### 实体

实体类型（多选下拉选单），先用文本框代替

可以选多种类型的实体，玩家击杀其中任意一种都算

#### NPC

NPCID（多选下拉选单），先用文本框代替

可以选多种NPC，玩家击杀其中任意一种都算

#### 玩家

无额外设置

#### 脚本

脚本函数（文本框）

要求给定一个函数名，此函数需存在于任务脚本中，输入类型为：

``` java
// 假设击杀节点的ID为10
void kill_task_10(Event event) {
  // ...
}

class Event {
  Entity entity;
  ServerPlayer player;
  boolean criteria;
}
```

当玩家击杀任意实体时，会执行该脚本进行判断，其中的布尔值表示判断的返回值，默认为false，若返回true，表示玩家击杀的实体满足要求。

### 自定义条件（暂未实现）

该节点第一个输入为流程输入，第二个输入为布尔类型输入，表示任务是否完成

每隔一段时间检测布尔类型输入是否为true

属性：

检测时间间隔（正整数）

### 脚本（任务目标）

属性：

检测时间间隔（正整数）

进度要求（正整数）

脚本示例：

```java
// 假设脚本节点的ID为10
void script_task_10(Event event) {
  // ...
}

class Event {
  ServerPlayer player;
  int progress;
}
```

## 流程控制节点

### 开始

每个任务只有一个开始节点，由新建任务时自动创建，无法通过编辑器添加或删除开始节点。

### 结束

每个任务可以有多个结束节点，当任意一个结束节点的前置节点完成时，该任务会立即完成。

TODO 结束节点后边可以接行为节点

TODO 属性：自定义描述

自定义描述会显示在流程图的节点名右侧，用括号括起来

### 或（流程控制）

完成条件：完成任意一个前置节点

TODO 可以添加输入端口数量

### 且（流程控制）

完成条件：完成全部前置节点

TODO 可以添加输入端口数量

### 阻塞（暂未实现）

完成条件：满足第一个前置节点

### 分支（暂未实现）

分支节点的第一个输入为流程输入，第二个输入为条件判断输入。

第一个输出表示条件判断为true，第二个输出表示条件判断为false。

## 条件判断节点（全部暂未实现）

### 或（条件判断）

### 且（条件判断）

### 非

### 脚本（条件判断）

输出布尔值

脚本示例：

```java
// 假设脚本节点的ID为10
void script_criteria_10(Event event) {
  // ...
}

class Event {
  ServerPlayer player;
  boolean criteria;
}
```

### 持有物品

返回玩家是否持有超过某个数量的某种物品

属性：

物品（物品怎么做输入？）

数量（正整数）

### 位置范围

要求玩家处于某个位置范围

属性：

世界（下拉选单），先用文本框代替

位置（暂未完成）：x1,y1,z1,x2,y2,z2，一个长方体范围

输出布尔值

### 任务状态

要求玩家某个任务处于某种状态

属性：

任务（任务选单）

状态（下拉选单）：未开始、进行中、已完成

## 行为节点（全部暂未实现）

行为节点有一个输入端口，没有输出端口

行为节点可以接在任何任务目标节点或流程控制节点之后。

### 拿走/给予物品

属性：

布尔值：取走/给予，会根据此值改变节点显示的名字

正整数：数量

物品（物品怎么做输入？）

### 开始任务

属性：

任务（任务选单）

### 开始对话

属性：

对话（对话选单）

### 聊天栏输出

属性：

文本内容

### 指令

属性：

指令内容

### 脚本
